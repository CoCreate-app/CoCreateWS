<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="utf-8">
      <title>Express session demo</title>
  </head>
  <body>
    <h1>Choose an action.</h1>
    <button id="btn1" type="button" title="Open WebSocket connection">
      SEND (a, b)
    </button>
    <button id="btn2" type="button" title="Send WebSocket message">
      SEND (b)
    </button>
    <pre id="messages" style="height: 400px; overflow: scroll"></pre>
    <script src="CoCreate-socket.js"></script>
    
    <script>
      const btn1 = document.getElementById('btn1');
      const btn2 = document.getElementById('btn2');
      
      const config = {
        "apiKey":           'c2b08663-06e3-440c-ef6f-13978b42883a',
        "securityKey":      'f26baf68-e3a9-45fc-effe-502e47116265',
        "organization_id":  '5de0387b12e200ea63204d6c'
      }
      
      const collection = 'ws-test';
      
      CoCreateSocket.create({
        namespace: config.organization_id,
        room: collection
      })

      CoCreateSocket.create({
        namespace: 'test',
        room: 'r2'
      })
      
      btn1.addEventListener('click', function(e) {
        sendMessage({
          namespace: config.organization_id,
          rooms: ['a', 'b'],
          emit: {
            message: 'receiveMessage',
            data: 'testing(a, b).......'
          }
        })
      })

      btn2.addEventListener('click', function(e) {
        sendMessage({
          namespace: config.organization_id,
          rooms: ['b'],
          emit: {
            message: 'receiveMessage',
            data: 'testing(b).......'
          }
        })
      })

      function sendMessage(info) {
        let request = {...config, ...info}
        const room = config.organization_id + "/" + collection;
        CoCreateSocket.send(room, 'sendMessage', request);
      }

    </script>
  </body>
</html>